@page

@using LearnItAll.Models.Skillblueprints
@using Microsoft.AspNetCore.Mvc.Localization
@using System.Web

@inject IViewLocalizer Localizer
@model LearnItAll.Areas.Blueprints.Pages.CreateBlueprintModel
			

<div class="just-padding">
    <div class="list-group list-group-root well">

		<div  hx-boost="true"
                hx-target="this"
                hx-swap="outerHTML settle:1s"
                class="align-items-center">
                <div id="fade-me-in" class="just-padding">
                    <div id="delete" class="list-group list-group-root well">
    			    	<form asp-page-handler="Create" method="post" >
    			    		<div class="input-group mb-3">
    			    				<input autofocus asp-for=@Model.NewBlueprintModel.Name class="form-control" placeholder="Skill Name" placeholder="Skill Name">
    			    		<button type="submit" class="btn btn-outline-secondary" style="font-size: 1.0rem; color: cornflowerblue;">+
    			    		</button>
    			    		</div>
    			    	</form>
		            </div>
		        </div>
		</div>
    </div>
</div>

@section scripts {
    <script>
            $(function() {
            
      $('.list-group-item').on('click', function() {
                                $('.bi', this)
                                  .toggleClass('bi-caret-right')
                                  .toggleClass('bi-caret-down');
                              });
    
                            });
    htmx.on("htmx:afterRequest", function(evt) {
        var formThatTriggeredTheSubmit = evt.detail.elt;
        formThatTriggeredTheSubmit.querySelector('input[name="AddPartModel.Name"]').value='';
    
    });
    htmx.logAll();

    //https://htmx.org/docs/#modifying_swapping_behavior_with_events
    document.body.addEventListener('htmx:beforeSwap', function(evt) {
    if(evt.detail.xhr.status === 400){
        // alert the user when a 400 occurs (maybe use a nicer mechanism than alert())
        alert("Error: Could Not Find Resource");
    } else if(evt.detail.xhr.status === 422){
        // allow 422 responses to swap as we are using this as a signal that
        // a form was submitted with bad data and want to rerender with the
        // errors
        //
        // set isError to false to avoid error logging in console
        evt.detail.shouldSwap = true;
        evt.detail.isError = false;
    } else if(evt.detail.xhr.status === 418){
        // if the response code 418 (I'm a teapot) is returned, retarget the
        // content of the response to the element with the id `teapot`
        evt.detail.shouldSwap = true;        
        evt.detail.target = htmx.find("#teapot");
    }
});
    </script>
}